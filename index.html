<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>找弹幕网 全免费 可以查被谁禁言，弹幕历史，礼物历史，排行等</title>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
    <link href="css/index.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#" style="font-size: 14px;font-weight: 700;color: #212121">我们不生产弹幕，我们只是直播间的搬运工</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li><a href="#">主页-搜弹幕 <span class="sr-only">(current)</span></a></li>
                <li><a href="#">素质广场</a></li>
                <li><a href="#">24H排行</a></li>
                <li><a href="new-black.html">禁言小黑屋</a></li>
                <!--<li style="text-align: center"><img src="images/buy-logo.png"></li>-->
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<!--<div class="">-->
    <!--<iframe src="home.html" frameborder="0" scrolling="no" id="external-frame" onload="setIframeHeight(this)" style="width: 100%;padding-top: 50px;height: 500px"></iframe>-->
<!--</div>-->


<div style="padding-top: 50px;height: 50%">
    <header class="zdm-topbar container-fluid" style="text-align: center">
        <h1 style="color: #cc995a;padding-top: 10px">找弹幕</h1>
    </header>
    <div class="container">
        <nav class="zdm-nav">
            <div role="tabpanel">
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#zdm_nav01" role="tab" data-toggle="tab">搜弹幕</a></li>
                    <li role="presentation"><a href="#zdm_nav02"  role="tab" data-toggle="tab" style="display: none">通过主播搜土豪</a></li>
                    <li role="presentation"><a href="#zdm_nav03" role="tab" data-toggle="tab" style="display: none">搜土豪</a></li>
                </ul>
                <!-- Tab panes -->
                <div class="tab-content" id="zdm-nav-search">
                    <div role="tabpanel" class="tab-pane active" id="zdm_nav01">
                        <input type="search" placeholder="请输入您要查询的对应用户平台昵称" data-toggle="popover" data-placement="bottom" data-content="" data-trigger="manual">
                        <span class="glyphicon glyphicon-search"></span>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="zdm_nav02">
                        <input  type="search" placeholder="请输入土豪昵称/主播昵称/直播间ID" data-toggle="popover" data-placement="bottom" data-content="" data-trigger="manual">
                        <span class="glyphicon glyphicon-search"></span>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="zdm_nav03">
                        <input type="search" placeholder="请输入土豪昵称/主播昵称/直播间ID" data-toggle="popover" data-placement="bottom" data-content="" data-trigger="manual">
                        <span class="glyphicon glyphicon-search"></span>
                    </div>
                </div>
                <div class="zdm-search-history">
                    <ul>

                    </ul>
                    <div class="clear-all"></div>
                </div>
            </div>
        </nav>
        <!--<div class="notice-info clearfix">-->
            <!--<div class="notice-content float_left">公告信息栏公告信息栏公告信息栏公告信息栏公告信息栏公告信息栏公告信</div>-->
            <!--<span class="glyphicon glyphicon-remove-circle float_right"></span>-->
        <!--</div>-->
    </div>
</div>

<!--<div style="height: 40%">-->

<!--</div>-->

<div class="zdm-footer weui-footer">
    <p class="weui-footer__links">
        <a href="javascript:void(0);" class="weui-footer__link">找弹幕<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1275256714'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s5.cnzz.com/z_stat.php%3Fid%3D1275256714%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script></a>
    </p>
    <p class="weui-footer__text">Copyright © 2018 www.zhaodanmu.com</p>
</div>

<!--<footer style="bottom: 0;position: absolute;text-align: center;font-size: 14px;padding-top: -5px;color: #808080;width: 100%;line-height: 1.6;">-->
    <!--<p style="margin-bottom: -4px">找弹幕&nbsp-->
        <!--<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1275256714'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s5.cnzz.com/z_stat.php%3Fid%3D1275256714%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script></p>-->
    <!--<p>Copyright © 2018 zhaodanmu.com</p>-->

<!--</footer>-->


<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
<script>
    $(function () {
        $(window).ajaxStart(function () {
            NProgress.start();
        });
        $(window).ajaxSend(function () {
            NProgress.done();
        });
        //搜索框元素
        let $searchElement = $('#zdm-nav-search input');
        //搜索历史记录
        let $historyElement = $('.zdm-search-history');
        //历史记录默认隐藏
        $historyElement.hide();
        /*1.默认根据历史记录渲染历史列表*/
        let historyListJson = localStorage.getItem('zdm-historyList') || '[]';
        let historyListArr = JSON.parse(historyListJson);
        renderHistoryInput();
        /*3.点击删除的时候删除对应的历史记录渲染列表*/
        $historyElement.children('ul').on('click','a',function () {
            var index = $(this).data('index');
            /*删除*/
            historyListArr.splice(index,1);
            /*保存*/
            localStorage.setItem('zdm-historyList',JSON.stringify(historyListArr));
            /*渲染一次*/
            renderHistoryInput();
        });
        /*4.点击清空的时候清空历史记录渲染列表*/
        $historyElement.children('.clear-all').on('click','a',function () {
            /*清空*/
            historyListArr = [];
            /*慎用  清空网上的所有本地存储*/
            //localStorage.clear();
            //localStorage.removeItem('zdm-historyList');
            localStorage.setItem('zdm-historyList','');
            renderHistoryInput();
        })
        //点击某项历史记录后,文本显示在搜索框内
        $historyElement.children('ul').on('click','span',function () {
            let selectVal =$(this).html();
            $searchElement.val(selectVal);
            $(window).attr('location','searchResult.html?input_value='+selectVal);
        });
        //鼠标在输入框时 历史记录显示
        $searchElement.on('click',function (e) {
            //取消冒泡事件
            stopBubble(e);
            $historyElement.show();
        });
        $('.navbar-collapse.collapse').on('click',function (e) {
            //取消冒泡事件
            stopBubble(e);
        });
        //点击空白处历史记录隐藏和顶部菜单展开状态时变为合并
        $(document).on('click',function () {
            $historyElement.hide();
            if($('.navbar-collapse.collapse').hasClass('in')){
                $('.navbar-collapse.collapse').removeClass('in');
            }
        });

        // 监听搜索框回车事件并响应
        $(document).on('keypress',function (e) {
            if (e.charCode == 13) {
                let value = $searchElement.val();
                let res = judgeInputval(value);
                $searchElement.popover();//初始化弹框 必须要有
                if (res < 0) {
                    var html = '';
                    if (res == -1){
                        html = '请输入查询内容';
                    }else if (res == -2){
                        html = '最多输入12个字符';
                    }
                    $searchElement.get(0).dataset.content = html;//设置弹框内容
                    $searchElement.popover('show');//显示弹框
                }else{
                    /*2.input监听到enter键并且输入框满足条件时更新历史记录渲染列表*/
                    /*追加一条历史*/
                    for (let i = 0; i < historyListArr.length; i++) {
                        if (historyListArr[i] === value){
                            historyListArr.splice(i,1);
                            break;//跳出循环
                        }
                    }
                    historyListArr.unshift(value);//添加到数组第一项
                    $searchElement.popover('hide');
                    /*保存*/
                    localStorage.setItem('zdm-historyList',JSON.stringify(historyListArr));
                    $(window).attr('location','searchResult.html?input_value='+value);
                }
            }
        });
        var judgeInputval = function (value) {
            value = $.trim(value);
            var res = 1;
            if (!value.length){
                res = -1;
            }else if (value.length > 12){
                res = -2;
            }
            return res;
        }
        //渲染搜索记录列表
        function renderHistoryInput() {
            var html = '';
            historyListArr.forEach(function (item,i) {
                html += '<li><span>'+item+'</span><a data-index="'+i+'" href="javascript:;">删除</a></li>';
            });
            html = html || '';
            $historyElement.children('ul').html(html);
            if (html !='') {//历史记录不为空
                $historyElement.children('.clear-all').html('<a>清空历史记录</a>');
            }else{
                $historyElement.children('.clear-all').html('');
            }
        }
    });
    function stopBubble(e){
        //一般用在鼠标或键盘事件上
        if(e && e.stopPropagation){
            //W3C取消冒泡事件
            e.stopPropagation();
        }else{
            //IE取消冒泡事件
            window.event.cancelBubble = true;
        }
    };
</script>


</body>
</html>